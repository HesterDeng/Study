<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css"
          integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <script src="https://d3js.org/d3.v5.min.js"></script>
    <script src="https://d3js.org/d3-dsv.v1.min.js"></script>
    <script src="https://d3js.org/d3-fetch.v1.min.js"></script>
</head>
<body>
<svg id="svg2"></svg>
<!--<img src="blob:http://192.168.1.120:8088/8c2e2f65-7077-4607-9292-9dc7a7c27708">-->
<!--<div style="width: 100px;height: 500px">-->
    <!--<img style="width: 100%;height: 100%" src="http://192.168.1.120:8021/api/file/show/cdcab40c-5781-4984-a00a-6fc441122697">-->
<!--</div>-->

<script>
    var svgWidth = 980;
    var svgHeight = 1000;
    var margin = { top: 80, right: 40, bottom: 130, left: 40 };
    var margin2 = { top: 410, right: 40, bottom: 60, left: 40 };
    var width = svgWidth - margin.left - margin.right;
    var height = svgHeight - margin.top - margin.bottom;
    var height2 = svgHeight - margin2.top - margin2.bottom;

    // var zoom = d3.zoom().scaleExtent([-100, 100]).on("zoom", zoomed);

    var xScale = d3.scaleLinear()
        .domain([0, 70])
        .range([0, svgWidth]);

    var chart = d3
        .select('#svg2')
        .attr('width', svgWidth)
        .attr('height', svgHeight) // 设置总宽高
    var rect = chart.append("g")
    rect.append("image")
        // .attr("width",20).attr("height",788)
        // .attr("transform", "scale(" + 0.5 + ")" )
        .attr("href","5d2ab04c-101d-4d91-9c6d-44fcebc9a68c.jpg");
    chart.append("g").append("image").attr("x",function () {
        return xScale(70/980*100)
    }).attr("href","5d2ab04c-101d-4d91-9c6d-44fcebc9a68c.jpg");
    chart.append("g").append("image").attr("x",function () {
        return xScale(70/980*200)
    }).attr("href","5d2ab04c-101d-4d91-9c6d-44fcebc9a68c.jpg");
    chart.append("g").append("image").attr("x",function () {
        return xScale(70/980*300)
    }).attr("href","5d2ab04c-101d-4d91-9c6d-44fcebc9a68c.jpg");
    chart.append("g").append("image").attr("x",function () {
        return xScale(70/980*400)
    }).attr("href","5d2ab04c-101d-4d91-9c6d-44fcebc9a68c.jpg");
    chart.append("g").append("image").attr("x",function () {
        return xScale(70/980*500)
    }).attr("href","5d2ab04c-101d-4d91-9c6d-44fcebc9a68c.jpg");

    function zoomed() {
        console.log("k:"+d3.event.transform.k);
        rect.select("image")
            .attr("transform", "translate(" + d3.event.transform.x+","+ d3.event.transform.y+ ")" + "scale(" + d3.event.transform.k*0.5 + ")" );
    }
</script>
</body>
</html>
